"use strict";(self.webpackChunkshopdot=self.webpackChunkshopdot||[]).push([[3908],{3158:function(e,r,a){a.d(r,{f:function(){return u},k:function(){return d}});var t=a(4165),n=a(5861),s=a(9731),o=a(9085),c=a(5548),i=a(7077),l=a(2381);function u(){return function(){var e=(0,n.Z)((0,t.Z)().mark((function e(r){var a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.get("".concat(c.od));case 3:return(a=e.sent)&&a.data&&200==a.data.code&&a.data.data&&r((0,i.s)(a.data.data)),e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(0),o.Am.error(e.t0&&e.t0.response&&e.t0.response.data&&e.t0.response.data.errors?e.t0.response.data.errors:"Something went worng"),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(r){return e.apply(this,arguments)}}()}function d(e){return function(){var r=(0,n.Z)((0,t.Z)().mark((function r(a){var n;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,s.Z.get("".concat(c.PO(e)));case 3:return(n=r.sent)&&n.data&&200==n.data.code&&n.data.data&&a((0,l.W)(n.data.data)),r.abrupt("return",n);case 8:throw r.prev=8,r.t0=r.catch(0),o.Am.error(r.t0&&r.t0.response&&r.t0.response.data&&r.t0.response.data.errors?r.t0.response.data.errors:"Something went worng"),r.t0;case 12:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()}},5548:function(e,r,a){a.d(r,{AM:function(){return x},Di:function(){return S},En:function(){return z},H4:function(){return o},HB:function(){return B},M8:function(){return L},N1:function(){return m},NC:function(){return k},NR:function(){return f},Nv:function(){return i},Nz:function(){return n},OH:function(){return I},PO:function(){return O},Pm:function(){return _},Rm:function(){return s},Wd:function(){return p},Xs:function(){return q},ZS:function(){return A},Zy:function(){return C},b9:function(){return N},bk:function(){return u},dF:function(){return b},gp:function(){return Z},gw:function(){return d},iw:function(){return h},kB:function(){return g},od:function(){return E},oe:function(){return T},oj:function(){return l},p8:function(){return v},qq:function(){return w},ry:function(){return P},uW:function(){return y},wG:function(){return R},xk:function(){return j},z6:function(){return c}});var t="https://dev.backend.shopdotapp.com/api/v1",n="".concat(t,"/auth/signup/"),s="".concat(t,"/auth/verification/send-mail"),o=("".concat(t,"/auth/verify"),"".concat(t,"/auth/signin")),c="".concat(t,"/auth/refresh-token"),i="".concat(t,"/auth/signout"),l=function(e){return"".concat(t,"/auth/user/").concat(e,"/change-password")},u=function(e){return"".concat(t,"/auth/user/").concat(e,"/reset-password")},d="".concat(t,"/auth/send-reset-link"),m="".concat(t,"/user/roles"),p="".concat(t,"/user/platform"),f=("".concat(t,"/platform/shopify-integration"),"".concat(t,"/auth/upload-image")),h=("".concat(t,"/user/retailer-profile"),"".concat(t,"/platform")),x="".concat(t,"/user/brand-profile"),v=function(e){return"".concat(t,"/user/brand-profile/").concat(e)},b="".concat(t,"/payment/create-brand-as-customer"),j="".concat(t,"/payment/customer/external-account"),N="".concat(t,"/payment/customer"),g="".concat(t,"/user/brand-shipping"),y="".concat(t,"/platform/shipping-times"),Z=function(e){return"".concat(t,"/shopify/sync-all-product?&user_id=").concat(e)},k=("".concat(t,"/shopify/sync-all-product"),"".concat(t,"/shopify/sync-product")),S="".concat(t,"/brand/setting/preferences"),w="".concat(t,"/brand/setting/notifications"),q="".concat(t,"/shopify/shopify-remove"),A=("".concat(t,"/user/retailer-profile"),"".concat(t,"/brand/product/list")),P="".concat(t,"/brand/product/download"),R="".concat(t,"/brand/product/upload"),_="".concat(t,"/brand/product-tags"),C=function(e){return"".concat(t,"/brand/product/category/").concat(e)},I=function(e){return"".concat(t,"/brand/product/").concat(e)},T=function(e){return"".concat(t,"/brand/product/").concat(e)},z="".concat(t,"/platform/category"),B="".concat(t,"/platform/values"),L="".concat(t,"/brand/orders"),E=("".concat(t,"/order/details"),"".concat(t,"/countries")),O=function(e){return"".concat(t,"/countries/").concat(e,"/states")}},4716:function(e,r,a){a.r(r),a.d(r,{default:function(){return k}});var t=a(9439),n=a(1413),s=a(2791),o=a(1134),c=a(9593),i=a(4695),l=a(2797),u=l.Ry().shape({companyName:l.Z_().required("Company name is required."),contactEmail:l.Z_().email("Must be a valid email.").max(255).required("Contact email is required."),contactPhone:l.Z_().required("Contact phone number is required."),retailerName:l.Z_().required("Retailer name is required."),retailerWebsite:l.Z_().required("Retailer website is required."),retailerCategory:l.Ry().nullable().required("Retailer category  is required."),aboutTheRetailer:l.Z_().required("About the retailer is required."),addressLine1:l.Z_().required("Address 1 is required."),countryAddress:l.Ry().nullable().required("Country  is required."),stateAddress:l.Ry().nullable().required("State  is required."),city:l.Z_().required("City is required."),zipcode:l.Z_().required("Zip is required.")});var d=a.p+"static/media/icon-edit.66db4866fc239f5ff3f3b6abbb739e70.svg",m=a.p+"static/media/profile-avatar.261dfdda4addff8f0f82.jpg";a(2253),a(8879),a(5212),a(9731),a(9085),a(5548),a(8098),a(8143);var p=a(3158),f=a(9434),h=function(e){return e.retailerProfile.retailerProfileSaving},x=function(e){return e.retailerProfile.retailerProfileSaveResult},v=a(6711),b=a(1435),j=a(184),N=[{label:"Apparel Boutique",value:0},{label:"Bakery or Coffee Shop",value:1},{label:"Book Store",value:2},{label:"Electronics",value:3},{label:"Fitness or Yoga Studio",value:4},{label:"Florist or Garden Store",value:5},{label:"Gift Store",value:6},{label:"Kids or Toy Store",value:7},{label:"Medical Office",value:8},{label:"Musical Instruments",value:9},{label:"Pharmacy",value:10},{label:"Pet Store",value:11},{label:"Shoe Store",value:12},{label:"Spa or Salon",value:13},{label:"Sporting and Outdoors",value:14}],g=["Not on Amazon","Made in USA","Handmade","Eco-friendly","Fair Trade","Social Good","Small Batch","Organic","BIPOC Owned","Size Inclusive"],y=[{value:"usa",label:"United States"},{value:"canada",label:"Canada"}],Z={control:function(e){return(0,n.Z)((0,n.Z)({},e),{},{boxShadow:"none",minHeight:"40px","&:hover":{boxShadow:"none"}})},container:function(e){return(0,n.Z)((0,n.Z)({},e),{},{marginTop:"5px",marginRight:"1px"})}};function k(){var e,r,a,l,k,S,w,q,A,P,R,_,C,I,T=(0,f.I0)(),z=((0,f.v9)(h),(0,f.v9)(x),(0,f.v9)(v.U)),B=null===z||void 0===z?void 0:z.map((function(e){return{value:e.id,label:e.name}})),L=(0,f.v9)(b.R),E=null===L||void 0===L?void 0:L.map((function(e){return{label:e.name,value:e.country_id}})),O=(0,s.useState)(m),F=(0,t.Z)(O,2),M=F[0],U=F[1],W=(0,s.useState)(),G=(0,t.Z)(W,2),H=G[0],D=G[1],J=(0,s.useState)(""),V=(0,t.Z)(J,2),Q=V[0],Y=V[1],X=(0,s.useState)(""),K=(0,t.Z)(X,2),$=K[0],ee=K[1];(0,s.useEffect)((function(){T((0,p.f)())}),[]);var re=function(e,r){var a=e.target.value.split(".");["png","jpg","jpeg"].filter((function(e){return a.includes(e)})).length?"profile"===r?(U(URL.createObjectURL(e.target.files[0])),Y("")):(D(URL.createObjectURL(e.target.files[0])),ee("")):"profile"===r?Y("Please upload only valid image format."):ee("Please upload only valid image format.")},ae=(0,o.cI)({defaultValues:{countryAddress:y[0]},mode:"onChange",resolver:(0,i.X)(u)}),te=ae.control,ne=ae.register,se=ae.handleSubmit,oe=ae.reset,ce=ae.formState.errors,ie=(0,o.qo)({name:"countryAddress",control:te});(0,s.useEffect)((function(){ie&&ie.value&&T((0,p.k)(null===ie||void 0===ie?void 0:ie.value))}),[ie]);return(0,j.jsx)("div",{className:"pc_tabs-content tabs_body",children:(0,j.jsx)("div",{className:"tab active","data-target":"Account",children:(0,j.jsxs)("div",{className:"products_content",children:[(0,j.jsxs)("div",{className:"products_head mp-head head-with-subtitle",children:[(0,j.jsx)("div",{className:"products_head-content",children:(0,j.jsx)("div",{className:"title",children:(0,j.jsx)("h1",{children:"Retailer Profile"})})}),(0,j.jsx)("p",{children:"Information entered on this page will be visible to brands within ShopDot."})]}),(0,j.jsx)("div",{className:"products_body",children:(0,j.jsx)("div",{className:"content_area",children:(0,j.jsx)("div",{id:"account",children:(0,j.jsxs)("form",{onSubmit:se((function(e){console.log("retailer-form-data----",e);e.companyName,e.contactEmail,e.contactPhone,e.companyName,e.retailerWebsite,e.aboutTheRetailer,e.addressLine1,e.addressLine2,e.countryAddress.label,e.stateAddress.label,e.city,e.zipcode;oe()})),children:[(0,j.jsxs)("div",{className:"account_info",children:[(0,j.jsx)("h2",{children:"Company Information "}),(0,j.jsxs)("div",{className:"form-area",children:[(0,j.jsxs)("div",{className:"form-input tooltip-input mb-4",children:[(0,j.jsxs)("label",{className:"form-label",children:["Company name ",(0,j.jsx)("span",{className:"asterisk-red",children:"*"})]}),(0,j.jsx)("input",(0,n.Z)({type:"text",className:"form-control mb-0",name:"companyName",id:"",placeholder:""},ne("companyName",{required:!0}))),(null===ce||void 0===ce?void 0:ce.companyName)&&(0,j.jsx)("span",{className:"error-text",children:null===ce||void 0===ce||null===(e=ce.companyName)||void 0===e?void 0:e.message})]}),(0,j.jsxs)("div",{className:"form-input tooltip-input mb-4",children:[(0,j.jsxs)("label",{className:"form-label",children:["Contact email ",(0,j.jsx)("span",{className:"asterisk-red",children:"*"})]}),(0,j.jsx)("input",(0,n.Z)({type:"text",className:"form-control mb-0",name:"contactEmail",id:"",placeholder:""},ne("contactEmail",{required:!0}))),(null===ce||void 0===ce?void 0:ce.contactEmail)&&(0,j.jsx)("span",{className:"error-text",children:null===ce||void 0===ce||null===(r=ce.contactEmail)||void 0===r?void 0:r.message})]}),(0,j.jsxs)("div",{className:"form-input tooltip-input mb-4",children:[(0,j.jsxs)("label",{className:"form-label",children:["Contact phone number"," ",(0,j.jsx)("span",{className:"asterisk-red",children:"*"})]}),(0,j.jsx)("input",(0,n.Z)({type:"number",className:"form-control mb-0",id:"",name:"contactPhone",placeholder:""},ne("contactPhone",{required:!0}))),(null===ce||void 0===ce?void 0:ce.contactPhone)&&(0,j.jsx)("span",{className:"error-text",children:null===ce||void 0===ce||null===(a=ce.contactPhone)||void 0===a?void 0:a.message})]})]})]}),(0,j.jsxs)("div",{className:"shipping_info",children:[(0,j.jsx)("h2",{children:"Shipping Address"}),(0,j.jsxs)("div",{className:"form-area",children:[(0,j.jsxs)("div",{className:"form-input mb-4",children:[(0,j.jsxs)("label",{htmlFor:"",className:"form-label",children:["Address line 1 ",(0,j.jsx)("span",{className:"asterisk-red",children:"*"})]}),(0,j.jsx)("input",(0,n.Z)({type:"text",className:"form-control mb-0",name:"addressLine1",placeholder:""},ne("addressLine1",{required:!0}))),ce.addressLine1&&(0,j.jsx)("span",{className:"error-text",children:null===(l=ce.addressLine1)||void 0===l?void 0:l.message})]}),(0,j.jsxs)("div",{className:"form-input mb-4",children:[(0,j.jsx)("label",{htmlFor:"",className:"form-label",children:"Address line 2"}),(0,j.jsx)("input",(0,n.Z)({type:"text",className:"form-control mb-0",name:"addressLine2",placeholder:""},ne("addressLine2",{required:!1}))),ce.addressLine2&&(0,j.jsx)("span",{className:"error-text",children:null===(k=ce.addressLine2)||void 0===k?void 0:k.message})]}),(0,j.jsxs)("div",{className:"category-form-input",children:[(0,j.jsxs)("div",{className:"form-input mb-4",children:[(0,j.jsxs)("label",{className:"form-label",children:["Country ",(0,j.jsx)("span",{className:"asterisk-red",children:"*"})]}),(0,j.jsx)(o.Qr,{name:"countryAddress",control:te,required:!0,render:function(e){var r=e.field;return(0,j.jsx)(c.ZP,(0,n.Z)((0,n.Z)({},r),{},{className:"basic-single",classNamePrefix:"select",placeholder:"Select Country",styles:Z,components:{IndicatorSeparator:function(){return null}},theme:function(e){return(0,n.Z)((0,n.Z)({},e),{},{colors:(0,n.Z)((0,n.Z)({},e.colors),{},{primary25:"#fbf5f0",primary:"#bd6f34"})})},options:B}))}}),ce.countryAddress&&(0,j.jsx)("span",{className:"error-text",children:null===(S=ce.countryAddress)||void 0===S?void 0:S.message})]}),(0,j.jsxs)("div",{className:"form-input mb-2",children:[(0,j.jsxs)("label",{className:"form-label",children:["State ",(0,j.jsx)("span",{className:"asterisk-red",children:"*"})]}),(0,j.jsx)(o.Qr,{name:"stateAddress",control:te,required:!0,placeholder:"Select State",render:function(e){var r=e.field;return(0,j.jsx)(c.ZP,(0,n.Z)((0,n.Z)({},r),{},{className:"basic-single",classNamePrefix:"select",placeholder:"Select State",styles:Z,components:{IndicatorSeparator:function(){return null}},theme:function(e){return(0,n.Z)((0,n.Z)({},e),{},{colors:(0,n.Z)((0,n.Z)({},e.colors),{},{primary25:"#fbf5f0",primary:"#bd6f34"})})},options:E}))}}),ce.stateAddress&&(0,j.jsx)("span",{className:"error-text",children:null===(w=ce.stateAddress)||void 0===w?void 0:w.message})]})]}),(0,j.jsxs)("div",{className:"category-form-input",children:[(0,j.jsxs)("div",{className:"form-input mb-2",children:[(0,j.jsxs)("label",{htmlFor:"",className:"form-label",children:["City ",(0,j.jsx)("span",{className:"asterisk-red",children:"*"})]}),(0,j.jsx)("input",(0,n.Z)({type:"text",className:"form-control mb-2 mt-0",name:"city"},ne("city",{required:!0}))),ce.city&&(0,j.jsx)("span",{className:"error-text",children:null===(q=ce.city)||void 0===q?void 0:q.message})]}),(0,j.jsxs)("div",{className:"form-input mb-2",children:[(0,j.jsxs)("label",{htmlFor:"",className:"form-label",children:["ZIP ",(0,j.jsx)("span",{className:"asterisk-red",children:"*"})]}),(0,j.jsx)("input",(0,n.Z)({type:"text",className:"form-control mb-2 mt-0",name:"zipcode"},ne("zipcode",{required:!0}))),ce.zipcode&&(0,j.jsx)("span",{className:"error-text",children:null===(A=ce.zipcode)||void 0===A?void 0:A.message})]})]})]})]}),(0,j.jsxs)("div",{className:"my_store",children:[(0,j.jsx)("h2",{children:"Retailer Information "}),(0,j.jsxs)("div",{className:"form-area",children:[(0,j.jsxs)("div",{className:"form-input form-upload-image",children:[(0,j.jsx)("a",{href:"#",className:"upload-logo",children:(0,j.jsxs)("label",{children:[(0,j.jsx)("input",{className:"d-none",id:"",type:"file",accept:"image/*",onChange:function(e){return re(e,"profile")}}),(0,j.jsx)("img",{src:d,className:"icon"}),(0,j.jsx)("div",{className:"profile-user-avtar",children:(0,j.jsx)("img",{src:M})})]})}),(0,j.jsxs)("label",{children:["Upload logo",(0,j.jsx)("span",{className:"asterisk-red",children:" *"}),(0,j.jsxs)("a",{href:"#",className:"remove-logo",onClick:function(){return U(m)},children:["Remove logo"," "]}),(0,j.jsxs)("span",{className:"logo-instruction",children:["Format Type:",(0,j.jsx)("b",{children:" JPEG or PNG"}),". Maximum size is ",(0,j.jsx)("b",{children:"5MB"}),", No less than ",(0,j.jsx)("b",{children:"512 x 512"})," pixels and no more than"," ",(0,j.jsx)("b",{children:"1024 x 1024"})," pixels."]})]})]}),(0,j.jsx)("div",{className:"error-text mb-3",children:Q}),(0,j.jsxs)("div",{className:"form-input mb-4",children:[(0,j.jsxs)("label",{className:"form-label",children:["Retailer name ",(0,j.jsx)("span",{className:"asterisk-red",children:"*"})]}),(0,j.jsx)("input",(0,n.Z)({type:"text",className:"form-control mb-0",name:"retailerName",id:"",placeholder:""},ne("retailerName",{required:!0}))),(null===ce||void 0===ce?void 0:ce.retailerName)&&(0,j.jsx)("span",{className:"error-text",children:null===ce||void 0===ce||null===(P=ce.retailerName)||void 0===P?void 0:P.message})]}),(0,j.jsxs)("div",{className:"form-input tooltip-input mb-4",children:[(0,j.jsxs)("label",{className:"form-label",children:["Retailer website",(0,j.jsx)("span",{className:"asterisk-red",children:"*"}),(0,j.jsxs)("div",{className:"tooltip",children:[(0,j.jsx)("div",{className:"tooltip-icon",children:(0,j.jsx)("svg",{className:"icon"})}),(0,j.jsx)("div",{className:"tooltip_text",children:(0,j.jsx)("p",{children:"This is your store that is connected with ShopDot. You can connect a different store in the Integration section."})})]})]}),(0,j.jsx)("input",(0,n.Z)({type:"text",className:"form-control mb-0",name:"retailerWebsite",placeholder:"www.website.com"},ne("retailerWebsite",{required:!0}))),(null===ce||void 0===ce?void 0:ce.retailerWebsite)&&(0,j.jsx)("span",{className:"error-text",children:null===ce||void 0===ce||null===(R=ce.retailerWebsite)||void 0===R?void 0:R.message})]}),(0,j.jsxs)("div",{className:"form-input mb-4",children:[(0,j.jsxs)("label",{className:"form-label",children:["Retailer category"," ",(0,j.jsx)("span",{className:"asterisk-red",children:"*"})]}),(0,j.jsx)(o.Qr,{name:"retailerCategory",control:te,render:function(e){var r=e.field;return(0,j.jsx)(c.ZP,(0,n.Z)((0,n.Z)({},r),{},{className:"basic-single",classNamePrefix:"select",placeholder:"Select Retailer category",styles:Z,components:{IndicatorSeparator:function(){return null}},theme:function(e){return(0,n.Z)((0,n.Z)({},e),{},{colors:(0,n.Z)((0,n.Z)({},e.colors),{},{primary25:"#fbf5f0",primary:"#bd6f34"})})},options:N}))}}),ce.retailerCategory&&(0,j.jsx)("span",{className:"error-text",children:null===(_=ce.retailerCategory)||void 0===_?void 0:_.message})]}),(0,j.jsxs)("div",{className:"form-input form-checkbox mb-4",children:[(0,j.jsx)("label",{className:"form-label",children:"Retailer values"}),(0,j.jsx)("div",{className:"select-checkbox third-col",children:(0,j.jsx)("div",{className:"select-checkbox",children:g.map((function(e,r){return(0,j.jsx)("div",{className:"check-item",children:(0,j.jsxs)("label",{className:"checkbox",children:[(0,j.jsx)("input",(0,n.Z)({type:"checkbox",name:"retialerValue",value:e},ne("retialerValue",{required:!1}))),(0,j.jsx)("div",{className:"checkbox-text",children:(0,j.jsx)("span",{children:e})})]})},r)}))})})]}),(0,j.jsxs)("div",{className:"form-input form-story mb-4",children:[(0,j.jsxs)("label",{className:"form-label",children:["About the retailer"," ",(0,j.jsx)("span",{className:"asterisk-red",children:"*"})]}),(0,j.jsx)("textarea",(0,n.Z)({rows:"8",className:"text-area",name:"aboutTheRetailer",placeholder:""},ne("aboutTheRetailer",{required:!0}))),(null===ce||void 0===ce?void 0:ce.aboutTheRetailer)&&(0,j.jsx)("span",{className:"error-text",children:null===ce||void 0===ce||null===(C=ce.aboutTheRetailer)||void 0===C?void 0:C.message})]}),(0,j.jsxs)("div",{className:"form-input mb-4",children:[(0,j.jsx)("label",{className:"form-label",children:"Add a Youtube or Vimeo video link"}),(0,j.jsx)("input",(0,n.Z)({type:"text",className:"form-control",name:"link"},ne("link",{required:!1}))),ce.link&&(0,j.jsx)("span",{className:"error-text",children:null===(I=ce.link)||void 0===I?void 0:I.message})]}),(0,j.jsxs)("div",{className:"form-input form-upload mb-4",children:[(0,j.jsx)("label",{className:"form-label",children:"Upload a photo of your store"}),(0,j.jsx)("div",{className:"uploadOuter",children:(0,j.jsxs)("span",{className:"dragBox",children:["Drag and drop file here",(0,j.jsx)("input",{id:"",name:"storeImage",type:"file",accept:"image/*",onChange:function(e){return re(e,"store")}}),(0,j.jsxs)("span",{className:"dragbox-smallnote",children:["Format Type: ",(0,j.jsx)("b",{children:"JPEG or PNG"}),". Maximum size is"," ",(0,j.jsx)("b",{children:"5MB"}),"."]})]})}),(0,j.jsx)("div",{className:"error-text mb-3",children:$}),(0,j.jsx)("div",{className:"preview",children:(0,j.jsx)("img",{src:H,className:"preview-img"})})]}),(0,j.jsxs)("div",{className:"form-input form-submit",children:[(0,j.jsx)("button",{onClick:function(){return oe()},className:"button button-grey cancel",children:"Cancel"}),(0,j.jsx)("button",{type:"submit",className:"button",children:"Save"})]})]})]})]})})})})]})})})}},6711:function(e,r,a){a.d(r,{U:function(){return t}});var t=function(e){return e.countries.countries}},1435:function(e,r,a){a.d(r,{R:function(){return t}});var t=function(e){return e.states.states}},9731:function(e,r,a){var t=a(4165),n=a(5861),s=a(3263),o=a(5548),c=s.Z;c.interceptors.request.use(function(){var e=(0,n.Z)((0,t.Z)().mark((function e(r){var a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.headers.Authorization){e.next=7;break}return e.next=3,localStorage.getItem("accessToken");case 3:a=e.sent,c.defaults.headers.common.Authorization=a?"Bearer ".concat(a):"",r.headers.Authorization="Bearer ".concat(a),r.maxRedirects=0;case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),(function(e){Promise.reject(e)})),c.interceptors.response.use(function(){var e=(0,n.Z)((0,t.Z)().mark((function e(r){var a,n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.config.url!==o.H4&&r.config.url!==o.Nz){e.next=13;break}return a=r.data.data.access_token?r.data.data.access_token:"",n=r.data.data.refresh_token?r.data.data.refresh_token:"",c.defaults.headers.common.Authorization=a?"Bearer ".concat(a):"",e.prev=4,e.next=7,localStorage.setItem("accessToken",a);case 7:return e.next=9,localStorage.setItem("refreshToken",n);case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(4);case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(r){return e.apply(this,arguments)}}());var i=[],l=!1;c.interceptors.response.use(void 0,function(){var e=(0,n.Z)((0,t.Z)().mark((function e(r){var a,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.response||!r.response.config||r.response.config.url!==o.z6||401!=r.response.status){e.next=4;break}setTimeout((0,n.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.setItem("accessToken","");case 2:return e.next=4,localStorage.setItem("refreshToken","");case 4:case"end":return e.stop()}}),e)}))),2e3),e.next=19;break;case 4:if(!r.response||401!=r.response.status){e.next=11;break}return a=localStorage.getItem("refreshToken"),s={refresh_token:a},i.push(r.config),e.abrupt("return",new Promise(function(){var e=(0,n.Z)((0,t.Z)().mark((function e(r,a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l||(l=!0,delete c.defaults.headers.common.Authorization,c.post(o.z6,s,{headers:{"content-type":"application/json"}}).then(function(){var e=(0,n.Z)((0,t.Z)().mark((function e(s){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.defaults.headers.common.Authorization="Bearer ".concat(s.data.data.access_token),e.next=3,localStorage.setItem("accessToken",s.data.data.access_token);case 3:return e.next=5,localStorage.setItem("refreshToken",s.data.data.refresh_token);case 5:i.map(function(){var e=(0,n.Z)((0,t.Z)().mark((function e(n,l){var u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i[l].headers.Authorization="Bearer ".concat(s.data.data.access_token),n.url!=o.Nv){e.next=8;break}return u=JSON.parse(n.data),e.next=5,localStorage.setItem("accessToken","");case 5:return e.next=7,localStorage.setItem("refreshToken","");case 7:n.data=JSON.stringify(u);case 8:c(n).then((function(e){return r(e)})).catch((function(e){a(e)}));case 9:case"end":return e.stop()}}),e)})));return function(r,a){return e.apply(this,arguments)}}()),l=!1,i=[];case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()).catch((function(e){if(setTimeout((0,n.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.setItem("accessToken","");case 2:return e.next=4,localStorage.setItem("refreshToken","");case 4:case"end":return e.stop()}}),e)}))),2e3),500!==e.response.status)return e})));case 1:case"end":return e.stop()}}),e)})));return function(r,a){return e.apply(this,arguments)}}()));case 11:if(!(r.response&&r.response.data&&r.response.data.location)){e.next=15;break}window.location=r.response.data.location,e.next=19;break;case 15:if(!r.response||401!=r.response.status||904==r.response.data.code){e.next=18;break}e.next=19;break;case 18:return e.abrupt("return",Promise.reject(r));case 19:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),r.Z=c}}]);
//# sourceMappingURL=3908.c3f4898a.chunk.js.map